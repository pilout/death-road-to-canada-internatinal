
(*

- ouija board event "Weegee"
	- Pick a question to ask
	- Different if solo
		- AM I PRETTY? [yes] Morale Boost
		- WHERE'S THE LOOT? Shows hidden supplies nearby
		- 

	
*)

cyoa{ road{ 

// Not a Ouija Board

: weegeetm .. "Weegee Board [tm]" pbold .. ;
: weegeecurse args( char ) 13 <- char .seed! ;

: weegee-end
	($ Thegroup .. "  se sent maintenant incroyablement malchanceux. Mefiez vous du " .. "Malediction de Weegee!" rbold $) +crtext
	"CHANCE MASSIVEMENT DIMINUEE!" fbold +crtext
	"Quelque part au loin, un gobelin rit." pbold +crtext goblin-laugh
	
;

cyoa-choice: common4-weegee-pretty
	choosehuman cicon
	($ "Le " weegeetm "  enonce " .. cname .. "  est " .. "	T R E S B E L L E" pbold $) text!
	($ "Bien ! " .. cname .. " ' Ne se sent pas du tout maudit par ce delicieux Weegee." $) +crtext
	morale2+
	"Somewhere in the distance, a goblin laughs, but in a nice way. As if to say 'hey.... what's up. have a nice day.'" pbold +crtext goblin-laugh
	choice( "bien" )choice
;

cyoa-choice: common4-weegee-loot
	($ "Le " weegeetm "  indique lemplacement dune cachette de butin dans la maison !" $) text!
	homesearch1
	weegee-end
;

cyoa-choice: common4-weegee-check
	weaselest choosechar cicon
	($ " Lorsquon lui demande qui trahira le groupe, le " weegeetm "  enonce " $) text!
	weaselest-pass if
		($ cname .. "' nom !" $) +text
		loyaltyREV
		weegee-end
	else
		" V O T R E C U L" pbold +crtext
		($ " Que pourrait signifier cela ? Le groupe devient inquiet et le doute sinstalle. Pourrait il sagir de la " .. " Malediction de Weegee ?" rbold $) +crtext
		morale--all goblin-laugh
	then
;

cyoa-choice: common4-weegee-canada
	($ "Le " weegeetm "  pointe le mot " .. "NON" pbold .. "  avec une vitesse incroyable. Puis il pointe vers " .. "NON" fbold .. "  a nouveau, en sembrasant quelque part.," $) text!
	($ "Quoi quil en coute ! Ces choses sont toujours erronees, nimporte quoi ! " .. cname .. " jette la flamme " weegeetm " dans la piece. Cela fait aussi prendre feu " .. chim .. " egalement." $) +crtext
	cchar isfireproof? if 
		($ cname .. " il aime etre incendiaire !" $) +crtext
		morale++ goodfx
	else
		ouch-- alive? if bitefx then
	then
	alive? if
		"Cetait une bonne exercice, du moins.," +crtext fitness++
	else
		($ "'ne touchez pas a la " .. "Malediction de Weegee!" rbold $) +crtext goblin-laugh
	then
	
;

cyoa: common4-weegee
	"Tableau Weegee" cyoa-title! choosehuman cicon
	($ Thegroup .. " pierce un batiment abandonne et y trouve un " weegeetm " ' sur la table de la cuisine. C'est un jeu courant utilise pour communiquer avec " .. "FANTOMES" fbold $) text!
		choice( "Laissez ce NON SENS tranquille" )choice
		($ "On dit que ces choses sont " .. "INCROYABLEMENT MAUDITES AVEC DE LA MALCHANCE" rbold .. ", so beware! Still, it may be worth asking it a question..." $) +crtext
		solohuman if
			choice( "SUIS JE JOLIE ?" )choice: common4-weegee-pretty
		else
			choice( "QUI TRAHIRA LEQUIPE ?" )choice: common4-weegee-check
		then
			choice( "VOLONTE" .. I-or-WE .. "Y ARRIVER AU CANADA ?" )choice: common4-weegee-canada
			choice( "'OU EST LE BUTIN ?" )choice: common4-weegee-loot
;

// Dog Poop

: common4-dogpoo-trueend 16 trunk-food+ goblin-laugh ;
: common4-dogpoo-reward 16 trunk-food+ badfx ;

cyoa-choice: common4-dogpoo-ignore
	($ Thegroup .. "  ignore la boite de ravitaillement et toute la nourriture quelle contient.	" .. gThey .. "  trouver" .. g1s .. "  quelques boites de conserve tout en fouillant le reste de la maison, mais doit se demander ce que " .. gthey .. "  rate." $) text!
	2 trunk-food+ goodfx
;

cyoa-choice: common4-dogpoo-pick

	cdog? if
		($ "Le caca de chien disparait mysterieusement avant " .. cname .. "  donne un coup de coude dans la boite pour louvrir !		" .. cname .. "  a lair vraiment coupable." $) text!
		morale--
		common4-dogpoo-reward
	then;
	ccat? if
		($ cname .. "  semble particulierement en colere davoir du repousser le caca de chien pour ouvrir la boite. " .. cHe .. "  a vraiment envie de mutiler quelque chose, plus que dhabitude." $) text!
		morale4-
		common4-dogpoo-reward
	then;
	cpet? if
		($ cname .. "  ouvre la boite de ravitaillement a coups de pied. En tant quanimal, " .. che .. " ' ne se soucie vraiment pas du caca de chien, donc ce n'etait pas vraiment un obstacle." $) text!
		16 trunk-food+ goodfx
	then;
	dogpal? if
		($ cname .. "  adore les chiens et nest pas etranger au fait de ramasser les crottes de chien et de les mettre dans un sac en plastique.		En fait, cela rappelle " .. cname .. "  de la civilisation. Sentir cette chaleur dans votre main, se sentir vivant !" $) text!
		morale2+ 16 trunk-food+ goodfx
	then;
	cchar oblivious? if
	($ cname .. "  ouvre la boite de ravitaillement. Quel etait le probleme ?		" .. cHe .. "  na jamais remarque le caca de chien." $) text!
		solo if
			goodfx
		else
			($ Everyone .. "  est degoute !" $) +crtext cchar morale2-all-except badfx
		then 16 trunk-food+
	then;
	($ cname .. "  essaie de pousser le caca de la boite avec un morceau de bois, mais ca tourne HORRIBLEMENT mal " .. cHe .. "  se fait prendre mal a laise bien des choses!" $) text!
		cattitude+ if
			badfx
			($ cHe .. "  tente de garder un attitude positive. Un jour, " .. cname .. "  sera en mesure de regarder cela et rire. Mais pas aujourdhui." $)
		else
			($ "Ceci est, sans aucun doute, la pire chose qui soit arrivee a " .. cname .. "  dans lapocalypse zombie. " .. cHe .. "  ne sera jamais, jamais la meme." $) +crtext
			($ cname .. ":" pbold .. "  PENALTE PERMANENTE DE MORALE!" fbold $)
			-1 STAT_MORALE cchar .bonus+ sfx{ creepy }
		then +crtext morale2- 16 trunk-food+
	
;

cyoa-bridge: common4-dogpoo-stick
	"Vous AVEZ GAGNE" cyoa-title! end-music
	"'Chaque enfant sait que le seul moyen sur de deplacer une merde de chien est en utilisant un baton de branchage d'arbre. C'est la nature parfaite pour retirer les feces de chien.	Vous avez exploite votre sens de fantaisie et votre merveille enfantine pour vaincre cette situation dangereuse." text!
	"Felicitations!" rainbold +crtext
	"'VOUS AVEZ TROUVER LA VRAIE FIN DE DEATH ROAD TO CANADA!" fbold +crtext
	choice( "Je lai fait!" )choice: common4-dogpoo-trueend
;

cyoa-bridge: common4-dogpoo-open
	solo if
		soloer choosechar common4-dogpoo-pick
	then;
	($ "Qui devrait ouvrir la caisse?" .. "aTTENTION: CEST VRAIMENT DEGUEULASSE		IL Y A UNE CROTTE DE CHIEN SUR LA CAISSE" rbold .. "cECI POURRAIT ETRE UNE GROSSE AFFAIRE" fbold $) text!
	' common4-dogpoo-pick cyoa-team-choice
;

cyoa: common4-dogpoo
	"VRAI DESESPOIR" cyoa-title! picon!
	($ "Comme " .. thegroup .. " cherche une maison abandonnee, un miracle se produit. " .. gThey .. "  trouver" .. g1s .. "  une boite de rationnement du gouvernement, non ouverte." $) text!
	($ "A " .. ghis .. "  HORREUR" rbold .. ", il savere quil y a un " .. " caca de chien" fbold .. "  assis " .. "JUSTE SUR LA POIGNEE" rbold .. "  de la boite dapprovisionnement." .. "  Il ny a aucun moyen de louvrir sans toucher le caca." rbold $) +crtext
	WEAPON_TREEBRANCH roadtrip-has-weapon? not if
		"Cela pourrait etre le plus grand defi, jusqua present!" +crtext
	then
		choice( "Pas question, cest degoutant, ignorez le" )choice: common4-dogpoo-ignore
		solo if
			soloer charchoice( "  louvre" )choice: common4-dogpoo-open
		else
			choice( "Demandez a quelquun de louvrir" )choice: common4-dogpoo-open
		then
		WEAPON_TREEBRANCH roadtrip-has-weapon? if
			choice( "Utilisez une branche darbre pour louvrir" )choice: common4-dogpoo-stick
		then
;

// Losing a sneeze

cyoa-choice: common4-sneeze-try
	($ cname .. " ne peut pas eternuer sur commande. " .. cHe .. " perd l'eternuement! C'est tres ennuyeux!" $) text!
	morale--
	cattitude- if
		($ "Cest le " .. "le pire qui puisse arriver a quelquun" rbold .. " dans la zombocalypse!" $) +crtext morale-- attitudeREV
	then
;

cyoa-choice: common4-sneeze-smash
	bitefx
	cchar .trait@ "BERSERK !" $= if
		($ cname .. " hurlements " .. "BERSERKEERRR!" fbold .. " et puis frappe " .. chim .. "se taper le nez dans le mur" $) text!
		ouch--
	then;
	($ cname .. " ecrase " .. chis .. " le nez propre sur un mur." $) text!
	sting--
	($ "'C'est une vieille ruse ! La douleur aveuglante fait oublier " .. cname .. " on oublie le souffle perdu." $) +crtext
;

cyoa-choice: common4-sneeze-animal
	cchar to victim
	somepet if choosechar then
	($ vname .. " qui le remplit " .. vhis .. " nez sur " .. cname .. "  et sifflote. Cela fait sortir une bonne eternuement !" $) text! goodfx
;

cyoa-choice: common4-sneeze-spicy
	($ cname .. " ouvre une sac de chips super epice. " .. cHe .. " prend une grande respiration." $) text!
	($ cname .. " sen servait dun coup et sifflote dans le sac ! 	" .. cHe .. " peut aussi manger lintegralite du sac de chips maintenant." $) +crtext
	-2 trunk-food+
	morale++
;

cyoa: common4-sneeze
	"LA SNEEZE PERDU" cyoa-title! choosehuman cicon
	($ cname .. " ressent vraiment que " .. che .. " " .. cname .. "''s morale!" $) text!
		choice( "Try to sneeze" )choice: common4-sneeze-try
		choice( "Smash self on nose" )choice: common4-sneeze-smash
		numpets 0 > if choice( "Snort animal dander" )choice: common4-sneeze-animal then
		trunk-food 1 > if choice( "Snort spicy food   Costs 2 food" )choice: common4-sneeze-spicy then
;

// Game Bronus Entertainment System

: common4-gamebro-ender
	($ "This game is way too difficult! " .. "AAAAAAAAAARGH!" fbold $) +crtext
	($ cname .. "  throws the GameBronus hard, destroying it." $) +crtext
	cattitude- if morale3- attitudeREV else morale2- then badfx
;

cyoa-choice: common4-gamebro-shoot
	($ "Drobnus Squadron" bbold .. "  is a game about Drobnus blasting aliens with a machinegun. Most deaths happen due to bad jumping controls mixed with instant kill pits." $) text!
	shooting++
	common4-gamebro-ender
;

cyoa-choice: common4-gamebro-med
	($ "Dr. Drobnus Deluxe" bbold .. "  is an overly detailed surgery sim, rendered in 8 bit graphics. Most players lose by failing proper sterile surgical gloves procedure." $) text!
	medical++
	common4-gamebro-ender
;

cyoa-choice: common4-gamebro-mech
	($ "Drobnus Kart" bbold .. " ' is a racing game starring the popular character Drobnus and all his pals. Even if you're in first place, you can get hit by a Homing Toilet and end up in last place." $) text!
	mechanic++
	common4-gamebro-ender
;

cyoa-bridge: common4-gamebro-med-pick
	solohuman if
		choosehuman common4-gamebro-med
	then;
	($ "Who should get to play " .. "Dr. Drobnus Deluxe" bbold .. "?" $) cyoa-text!
	"ATTENTION: Ca va etre dur pour le moral!" rbold +crtext
	' common4-gamebro-med cyoa-human-choice
;

cyoa-bridge: common4-gamebro-mech-pick
	solohuman if
		choosehuman common4-gamebro-mech
	then;
	($ "Who should get to play " .. "Drobnus Kart" bbold .. "?" $) cyoa-text!
	"ATTENTION: Ca va etre dur pour le moral!" rbold +crtext
	' common4-gamebro-mech cyoa-human-choice
;

cyoa-bridge: common4-gamebro-shoot-pick
	solohuman if
		choosehuman common4-gamebro-shoot
	then;
	($ "Who should get to play " .. "Drobnus Squadron" bbold .. "?" $) cyoa-text!
	"ATTENTION: Ca va etre dur pour le moral!" rbold +crtext
	' common4-gamebro-shoot cyoa-human-choice
;

cyoa: common4-gamebro
	"Systeme de divertissement GameBronus" cyoa-title! someicon
	($ Thegroup .. " trouve un vieux " .. "JeuBronus [TM]" bbold .. "'	C'est une console de jeux portable qui a survecu aussi longtemps parce qu'elle est construite comme une brique.	Il y avait quelques jeux avec, tous connus pour leur " .. "difficulte extremement frustrante" rbold $) text!
		choice( "Laisse GameBronus derriere" )choice
		choice( "Dr. Drobnus Deluxe" )choice: common4-gamebro-med-pick
		choice( "Drobnus Kart" )choice: common4-gamebro-mech-pick
		choice( "Drobnus Squadron" )choice: common4-gamebro-shoot-pick
;

// Baked Beans on Garbage Mountain

: common4-beans-ender
	sting--
	($ "Les ordures se repandent sur " .. cname .. "! Ca en valait la peine ! Tout ca pour les haricots !" $) +crtext
	morale2- 3 trunk-food+ badfx
	
;

cyoa-choice: common4-beans-eat
	($ cname .. "  mange une partie du tas dordures ! Cela fait tomber la boite de haricots en haut sans que tout le tas ne secroule sur " .. chim .. ". Quelle delicieuse solution !" $) text!
	morale2+ 3 trunk-food+ goodfx
;

cyoa-choice: common4-beans-smash
	($ cname .. "  fracasse le tas dordures ! Il seffondre sur " .. chim .. "." $) text!
	strength++ common4-beans-ender
;

cyoa-choice: common4-beans-climb
	($ cname .. "  grimpe sur le tas dordures ! Il seffondre avec " .. chim .. "  dessus." $) text!
	fitness++ common4-beans-ender
;

cyoa-bridge: common4-beans-smash-pick
	solohuman if
		choosehuman common4-beans-smash
	then;
	($ "Qui devrait combattre le tas dordures ?" $) cyoa-text!
	' common4-beans-smash cyoa-human-choice
;

cyoa-bridge: common4-beans-climb-pick
	solo if
		soloer choosechar common4-beans-climb
	then;
	($ "Qui devrait grimper sur le tas dordures ?" $) cyoa-text!
	' common4-beans-climb cyoa-team-choice
;

cyoa-bridge: common4-beans-eat-pick
	solopet if
		choosepet common4-beans-eat
	then;
	($ "Qui devrait manger le tas dordures ?" $) cyoa-text!
	' common4-beans-eat cyoa-pet-choice
;

cyoa: common4-beans
	"La bataille de la montagne dordures" cyoa-title! someicon
	($ Thegroup .. " ' apercoit un tres grand tas d'ordures pres de quelques batiments. Il fait peut etre plus de 12 pieds de haut. Les dechets se sont accumules assez pres de l'effondrement de la civilisation.	Un " .. "'Grosse boite de haricots cuits au four" rbold .. " est coince pres du sommet de la pile. Il brille comme un phare despoir." $) text!
		choice( "Laisse le tranquille" )choice
		choice( "Pile de dechets ecrasee" )choice: common4-beans-smash-pick
		choice( "Monter le tas de detritus" )choice: common4-beans-climb-pick
		numpets 0 > if choice( "Manger tas de dechets" )choice: common4-beans-eat-pick then
;

// Old VHS tape

: common4-vhs-end
	morale++all
	($ "La tele tombe en panne apres le film et est laissee derriere." +crtext
;

: sumo-vhs args( char )
	<- char ispet? if 
		<- char dog? if
			($ <- char .name@ .. "  apprend le sumo, bien quil soit un chien." $) +crtext
			WEAPON_SUMO <- char .weapon_default!
		then
	then;	
	<- char .weapon_default@ WEAPON_SUMO = if
		($ <- char .name@ .. "  apprend des techniques de sumo superieures!" $) +crtext
		WEAPON_SUPERSUMO <- char .weapon_default!
	else WEAPON_SUMO <- char .weapon_default! then
;

cyoa-blank: common4-vhs-sumo
	"La lutte sumo etait dans le top 5 des sports en Amerique avant le zombocalypse. Cela a conduit a de nombreux films de sumo, drames televises de sumo, dessins animes de sumo, etc." text!
	($ Thegroup .. "  reprend quelques mouvements de sumo en regardant le film!" $) +crtext
	' sumo-vhs foreach-team-char common4-vhs-end
;

cyoa-blank: common4-vhs-shoot
	($ "La cassette video est une adaptation cinematographique du jeu darcade " .. "DEATHSPLOSIONAL!" fbold .. " ' C'est mieux que pas de film du tout." $) text!
	
	' .shooting++ foreach-team-char common4-vhs-end
;

cyoa-blank: common4-vhs-fit
	($ Thegroup .. " ' suit le professeur de fitness sur la cassette video. Tout le monde porte des bandeaux de sudation fluo." $) text!
	
	' .fitness++ foreach-team-char common4-vhs-end
;

cyoa-blank: common4-vhs-morale
	($ "Le film comique savere terrible selon la plupart des normes, mais " .. thegroup .. " ' est completement absorbe par celui ci. C'est tres rare de voir un film de nos jours." $) text!	morale3+all
	"La tele tombe en panne au milieu du deuxieme visionnage et ne revient jamais." +crtext
;

cyoa: common4-vhs-rare
	"Lecteur de cassettes video" cyoa-title!
	($ Thegroup .. " ' trouve la cachette abandonnee de quelqu'un dans une maison barricadee. Il ne reste plus grand chose ici, a part une petite television a piles branchee a un vieux lecteur VHS. Il n'y a qu'un seul film dans le lecteur de cassettes video:" $) text!
		choice( "Film daction" )choice:  common4-vhs-shoot
		choice( "Video de fitness" )choice: common4-vhs-fit
		choice( "Film comique" )choice: common4-vhs-morale
		choice( "Film sumo" )choice: common4-vhs-sumo
;

// Spider attack based on a true story where I ate a spider

cyoa-choice: common4-spider-run
	($ Thegroup .. " sort de cette maison ! Le raideau continue lentement de se deplacer sur les murs dans un maniere creepy et disgusting." $) text!
	morale--all badfx
;

cyoa-choice: common4-spider-smoosh
	cchar .trait@ "BERSERK !" $= if
		($ cname .. " hurlements " .. "BERSERKEERRR!" fbold .. " et ensuite " .. "ANNIHILE" fbold .. " le raideau. Seule une brume de fumee reste de lui." $) text!
		morale2+ goodfx
	else
		($ cname .. " ecrase le raideau. Il y a un bruit particulierement grossier." $) text!
		cattitude+ if morale-- else morale2- then badfx
	then
		($ Thegroup .. " recherche dans la maison et trouve de la nourriture !" $) +crtext 2 5 rnd trunk-food+
;

cyoa-bridge: common4-spider-smoosh-pick
	solohuman if
		choosehuman common4-spider-smoosh
	then;
	($ "Qui devrait ecraser laraignee ?" $) cyoa-text!
	' common4-spider-smoosh cyoa-human-choice
;

// Gourmand logic below, also used in a bandit event but not enough to move and untangle dependencies
: isgourmand? .trait@ "Gourmand" $= ;
: numgourmandfilt args( chara ) <- chara isgourmand? ;
: numgourmands team-stack ' numgourmandfilt stack-filter nip ;

: gourmandcheck
	checkchar isgourmand?
;

: gourmandfilt ' isgourmand? stack-filter drop ;
: cyoa-gourmand-choice team-stack gourmandfilt cyoa-char-stack-choice ;

cyoa-choice: common4-spider-eat
	($ cname .. " regarde autour pour s'assurer que personne ne regarde, puis mange rapidement l'araignee. C'est croque." $) text! goodfx
	morale++
	cchar isgourmand? if
		($ "I was hungry..." pbold .. "
		-- " .. cname $) +crtext
	then
;

cyoa-bridge: common4-spider-eat-pick
	solopet numgourmands 1 < and if
		choosepet common4-spider-eat
	then;
	($ "Qui devrait manger laraignee ?" $) cyoa-text!
	' common4-spider-eat cyoa-pet-choice
	' common4-spider-eat cyoa-gourmand-choice
;

cyoa: common4-spider
	"Attaque daraignee geante" cyoa-title! someicon
	($ Thegroup .. "  essaie de se reposer dans une maison mais est pris en embuscade par une " .. "araignee geante !" fbold $) text!
	($ "'Eh bien c'est peut etre une araignee normale mais elle a l'air degoutante. L'araignee se vide rapidement " .. thegroup .. "''s morale!" $) +crtext
		choice( "Courir de degout" )choice: common4-spider-run
		choice( "Ecraser laraignee" )choice: common4-spider-smoosh-pick
		numpets 0 > numgourmands 0 > or if choice( "Manger une araignee" )choice: common4-spider-eat-pick then
		// choosepet cchar charchoice( ": Manger une araignee"
;

// Strange Vending Machine

0 value common4-vending-num

cyoa-choice: common4-vending-go
	"Il faut une eternite pour alimenter les billets dun dollar. Le distributeur automatique les recrache constamment." text!
	cattitude+ if morale-- attitudeREV else morale2- then goodfx
	common4-vending-num case 
	1 of 
		"Un fusil de chasse entierement charge sort du distributeur automatique !" +crtext
		1 WEAPON_SHOTGUN trunk.weapon+ 6 trunk-shotgun-shell+
	endof
	2 of 
		"Un fusil de cowboy charge sort du distributeur automatique !" +crtext
		1 WEAPON_RIFLE trunk.weapon+ 10 trunk-rifle-shell+
	endof
	3 of 
		"Un revolver Dolt charge sort du distributeur automatique !" +crtext
		1 WEAPON_DOLT trunk.weapon+ 6 trunk-bullet+
	endof
	4 of 
		"'Un sac de chips tombe ! Pas la taille habituelle du distributeur automatique, c'est la taille familiale enorme." +crtext 4 trunk-food+
	endof
	5 of 
		"Un jerrycan dessence sort du distributeur automatique !" +crtext 30 trunk-gas+
	endof
	6 of 
		"Une grande boite de bandages medicamenteux sort du distributeur automatique !" +crtext 3 trunk-medical+
	endof 
	7 of 
		($ "The vending machine's shape changes! It transforms into an electric car!
			" .. Thegroup .. "  monte dans." $) +crtext CAR_HYBRID2 get-car 30 trunk-gas+
	endof
	8 of 
		"'Un baton tombe du distributeur automatique ! Je ne suis pas sur de ce que tu attendais, c'est un baton." +crtext
		1 WEAPON_TREEBRANCH trunk.weapon+
	endof
	9 of 
		($ "Un chapeau sort du distributeur automatique !" .. cname .. "  le met." $) +crtext
		1 27 rnd cchar .hattype! morale++
	endof 
	endcase
;

cyoa-bridge: common4-vending-pick
	solohuman if
		choosehuman cicon
		($ cname .. "  va devoir inserer les billets dechires et froisses dans le distributeur automatique. Cela va etre ennuyeux." $) text!
		cchar charchoice( ": Inserer des billets" )choice: common4-vending-go
		choice( "Laisse le tranquille" )choice
	then;
	($ "Qui devrait inserer les billets dun dollar pourris dans la machine ?" $) cyoa-text!
	"ATTENTION : Ce sera un processus tres ennuyeux" rbold +crtext
	' common4-vending-go cyoa-human-choice
	choice( "Laissez le tranquille apres tout" )choice
;

: common4-vending-1 1 to common4-vending-num common4-vending-pick ;
: common4-vending-2 2 to common4-vending-num common4-vending-pick ;
: common4-vending-3 3 to common4-vending-num common4-vending-pick ;
: common4-vending-4 4 to common4-vending-num common4-vending-pick ;
: common4-vending-5 5 to common4-vending-num common4-vending-pick ;
: common4-vending-6 6 to common4-vending-num common4-vending-pick ;
: common4-vending-7 7 to common4-vending-num common4-vending-pick ;
: common4-vending-8 8 to common4-vending-num common4-vending-pick ;
: common4-vending-9 9 to common4-vending-num common4-vending-pick ;

cyoa: common4-vending
	"Etrange distributeur automatique" cyoa-title! someicon
	($ Thegroup .. "  tombe sur un distributeur automatique tres deplace. On dirait que quelquun la fabrique a partir de morceaux de ferraille. Ses lumieres sont toujours allumees. Tout dans la machine coute 20 $, et " .. thegroup .. "  a environ autant en billets froisses et effiloches." $) text!
		choice( "Laisse le tranquille" )choice
		
		33 %chance if
			choice( "SHOTGUN FUN PACK" )choice: common4-vending-1
		else
			50 %chance if
				choice( "ROOTIN TOOTIN RIFLE" )choice: common4-vending-2
			else
				choice( "SET REEL DE REVOLVER" )choice: common4-vending-3
			then
		then
		
		33 %chance if
			choice( "SACHET DE CHIPS" )choice: common4-vending-4
		else
			50 %chance if
				choice( "Boite a essence" )choice: common4-vending-5
			else
				choice( "Boite d'adhesifs" )choice: common4-vending-6
			then
		then
		
		10 %chance if
			choice( "Voiture neuve" )choice: common4-vending-7
		else
			50 %chance if
				choice( "Baton" )choice: common4-vending-8
			else
				choice( "Chapeau neuf" )choice: common4-vending-9
			then
		then		
;

} }

// Blank
(*
cyoa-choice: common4--

;

cyoa: common4-
	" " cyoa-title!
	($ " " $) text!
		choice( " " )choice
		choice( " " )choice
;
*)